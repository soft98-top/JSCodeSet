javascript:eval(window.atob('dHJ5IHsKICAgIGlmICh0eXBlb2YoJC5hamF4KSA9PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgY29uc29sZS5sb2coJ2pRdWVyeSBMb2FkZWQhJyk7CiAgICB9ZWxzZXsKICAgICAgICBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTsKICAgICAgICBzY3JpcHQuc2V0QXR0cmlidXRlKCJzcmMiLCJodHRwczovL2FwcHMuYmRpbWcuY29tL2xpYnMvanF1ZXJ5LzIuMS40L2pxdWVyeS5taW4uanMiKTsKICAgICAgICBkb2N1bWVudC5jaGlsZHJlblswXS5hcHBlbmRDaGlsZChzY3JpcHQpOwogICAgICAgIGNvbnNvbGUubG9nKCdqUXVlcnkgTG9hZGluZyEnKTsKICAgIH0KfSBjYXRjaCAoZXJyb3IpIHsKICAgIHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpOwogICAgc2NyaXB0LnNldEF0dHJpYnV0ZSgic3JjIiwiaHR0cHM6Ly9hcHBzLmJkaW1nLmNvbS9saWJzL2pxdWVyeS8yLjEuNC9qcXVlcnkubWluLmpzIik7CiAgICBkb2N1bWVudC5jaGlsZHJlblswXS5hcHBlbmRDaGlsZChzY3JpcHQpOwogICAgY29uc29sZS5sb2coJ2pRdWVyeSBMb2FkaW5nIScpOwp9CmFzeW5jIGZ1bmN0aW9uIHNlbmQobWV0aG9kLHVybCxkYXRhPSIiLGpzb25Td2l0Y2g9dHJ1ZSkgewogICAgbGV0IGFqYXhDb25maWcgPSB7CiAgICAgICAgInR5cGUiOm1ldGhvZCwKICAgICAgICAidXJsIjp1cmwsCiAgICAgICAgImRhdGEiOmRhdGEsCiAgICAgICAgInhockZpZWxkcyI6ewogICAgICAgICAgICAid2l0aENyZWRlbnRpYWxzIjp0cnVlCiAgICAgICAgfQogICAgfQogICAgaWYgKGpzb25Td2l0Y2gpIHsKICAgICAgICBhamF4Q29uZmlnWyJkYXRhIl0gPSBKU09OLnN0cmluZ2lmeShkYXRhKTsKICAgICAgICBhamF4Q29uZmlnWyJkYXRhVHlwZSJdID0gImpzb24iOwogICAgICAgIGFqYXhDb25maWdbImNvbnRlbnRUeXBlIl0gPSAiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04IjsKICAgICAgICBhamF4Q29uZmlnWyJoZWFkZXJzIl0gPSB7CiAgICAgICAgICAgICJDb250ZW50LVR5cGUiOmBhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLThgCiAgICAgICAgfTsKICAgIH0KICAgIGlmKGRhdGE9PSIiKXsKICAgICAgICBhamF4Q29uZmlnWyJkYXRhIl0gPSBudWxsOwogICAgfQogICAgbGV0IHJldHZhbCA9IGF3YWl0ICQuYWpheChhamF4Q29uZmlnKTsKICAgIHJldHVybiByZXR2YWw7Cn0KCmZ1bmN0aW9uIGZ1Y2tEb3dubG9hZChmaWQpIHsKICAgIGxldCBkYXRhID0gewogICAgICAgICJmaWRzIjpbXQogICAgfQogICAgaWYgKHR5cGVvZihmaWQpID09ICJvYmplY3QiKSB7CiAgICAgICAgZGF0YS5maWRzID0gZmlkOwogICAgfWVsc2V7CiAgICAgICAgZGF0YS5maWRzLnB1c2goZmlkKTsKICAgIH0KICAgIHNlbmQoIlBPU1QiLCJodHRwczovL2RyaXZlLnF1YXJrLmNuLzEvY2xvdWRkcml2ZS9maWxlL2Rvd25sb2FkP3ByPXVjcHJvJmZyPXBjIixkYXRhKS50aGVuKChkYXRhKSA9PiB7CiAgICAgICAgaWYoZGF0YS5jb2RlID09IDApewogICAgICAgICAgICBmb3IgKGxldCBkb3dubG9hZF9kYXRhIG9mIGRhdGEuZGF0YSkgewogICAgICAgICAgICAgICAgd2luZG93Lm9wZW4oZG93bmxvYWRfZGF0YVsiZG93bmxvYWRfdXJsIl0pOwogICAgICAgICAgICB9CiAgICAgICAgfWVsc2V7CiAgICAgICAgICAgIGFsZXJ0KCJGdWNrRG93bmxvYWQgRmFpbCwgZXJyb3I6ICIgKyBkYXRhWyJtZXNzYWdlIl0pOwogICAgICAgIH0KICAgIH0pCn0KCmZ1bmN0aW9uIGV4cG9ydERpcih0YXNrX2RhdGEpIHsKICAgIHNlbmQoIkdFVCIsImh0dHBzOi8vZHJpdmUucXVhcmsuY24vMS9jbG91ZGRyaXZlL2Rvd25sb2FkL2xpc3QvZXhwb3J0P3ByPXVjcHJvJmZyPXBjIix0YXNrX2RhdGEsZmFsc2UpLnRoZW4oKGRhdGExKSA9PiB7CiAgICAgICAgaWYgKGRhdGExID09ICIiKSB7CiAgICAgICAgICAgIHNldFRpbWVvdXQoZXhwb3J0RGlyKHRhc2tfZGF0YSksNTAwKTsKICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgbGV0IGZpZCA9IGRhdGExLnN1YnN0cmluZyhkYXRhMS5pbmRleE9mKCc6JykgKyAxLGRhdGExLmluZGV4T2YoJzsnKSk7CiAgICAgICAgICAgIGZ1Y2tEb3dubG9hZChmaWQuc3BsaXQoIiwiKSk7CiAgICAgICAgfQogICAgfSk7Cn0KCmZ1bmN0aW9uIGZ1Y2tEb3dubG9hZERpcihmaWQpIHsKICAgIGxldCBkYXRhID0gewogICAgICAgICJjdXJyZW50X2Rpcl9maWQiOmZpZAogICAgfTsKICAgIHNlbmQoIlBPU1QiLCJodHRwczovL2RyaXZlLnF1YXJrLmNuLzEvY2xvdWRkcml2ZS9kb3dubG9hZC9saXN0P3ByPXVjcHJvJmZyPXBjIixkYXRhKS50aGVuKChkYXRhKSA9PiB7CiAgICAgICAgaWYoZGF0YS5jb2RlID09IDApewogICAgICAgICAgICBsZXQgdGFza19kYXRhID0gewogICAgICAgICAgICAgICAgInRhc2tfaWQiOmRhdGEuZGF0YVsndGFza19pZCddCiAgICAgICAgICAgIH07CiAgICAgICAgICAgIGV4cG9ydERpcih0YXNrX2RhdGEpOwogICAgICAgIH1lbHNlewogICAgICAgICAgICBhbGVydCgiRnVja0Rvd25sb2FkIEZhaWwsIGVycm9yOiAiICsgZGF0YVsibWVzc2FnZSJdKTsKICAgICAgICB9CiAgICB9KTsKfQoKZnVuY3Rpb24gZnVja0Rvd25sb2FkcygpIHsKICAgIGZpbGVUciA9ICQoInRyW2RhdGEtcm93LWtleV0iKTsKICAgIGZvciAobGV0IGkgPSAwIDsgaSA8IGZpbGVUci5sZW5ndGg7IGkrKykgewogICAgICAgIGZpbGUgPSBmaWxlVHJbaV07CiAgICAgICAgbGV0IGZpZCA9IGZpbGUuZ2V0QXR0cmlidXRlKCJkYXRhLXJvdy1rZXkiKTsKICAgICAgICBsZXQgc2l6ZVRkID0gZmlsZS5nZXRFbGVtZW50c0J5VGFnTmFtZSgidGQiKVsyXTsKICAgICAgICBpZihzaXplVGQuZ2V0QXR0cmlidXRlKCJpc2Z1Y2tlZCIpICE9ICJ5ZXMiKXsKICAgICAgICAgICAgaWYgKHNpemVUZC5pbm5lclRleHQgPT0gIi0iKSB7CiAgICAgICAgICAgICAgICBzaXplVGQuaW5uZXJIVE1MID0gc2l6ZVRkLmlubmVyVGV4dCArICI8YnV0dG9uIG9uY2xpY2s9J2Z1Y2tEb3dubG9hZERpcihcIiIgKyBmaWQgKyAiXCIpJz4tPiBEb3dubG9hZCA8LTwvYnV0dG9uPiI7CiAgICAgICAgICAgIH1lbHNlewogICAgICAgICAgICAgICAgc2l6ZVRkLmlubmVySFRNTCA9IHNpemVUZC5pbm5lclRleHQgKyAiPGJ1dHRvbiBvbmNsaWNrPSdmdWNrRG93bmxvYWQoXCIiICsgZmlkICsgIlwiKSc+LT4gRG93bmxvYWQgPC08L2J1dHRvbj4iOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHNpemVUZC5zZXRBdHRyaWJ1dGUoImlzZnVja2VkIiwieWVzIik7CiAgICAgICAgfQogICAgfQp9CgpmdW5jdGlvbiBzdGFydEZ1Y2soKSB7CiAgICB0cnkgewogICAgICAgIGlmICh0eXBlb2YoJC5hamF4KSA9PSAnZnVuY3Rpb24nKXsKICAgICAgICAgICAgZnVja0Rvd25sb2FkcygpOwogICAgICAgICAgICBjb25zb2xlLmxvZygiRnVjayBEb3dubG9hZHMgU3VjY2VzcyEiKQogICAgICAgIH1lbHNlewogICAgICAgICAgICBzZXRUaW1lb3V0KHN0YXJ0RnVjaywxMDApOwogICAgICAgIH0KICAgIH0gY2F0Y2ggKGVycm9yKSB7CiAgICAgICAgc2V0VGltZW91dChzdGFydEZ1Y2ssMTAwKTsKICAgIH0KICAgIAp9CgpzZXRUaW1lb3V0KHN0YXJ0RnVjaywxMDApOw=='));