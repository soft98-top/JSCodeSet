javascript:eval(window.atob('dHJ5IHsKICAgIGlmICh0eXBlb2YoJC5hamF4KSA9PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgY29uc29sZS5sb2coJ2pRdWVyeSBMb2FkZWQhJyk7CiAgICB9ZWxzZXsKICAgICAgICBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTsKICAgICAgICBzY3JpcHQuc2V0QXR0cmlidXRlKCJzcmMiLCJodHRwczovL2FwcHMuYmRpbWcuY29tL2xpYnMvanF1ZXJ5LzIuMS40L2pxdWVyeS5taW4uanMiKTsKICAgICAgICBkb2N1bWVudC5jaGlsZHJlblswXS5hcHBlbmRDaGlsZChzY3JpcHQpOwogICAgICAgIGNvbnNvbGUubG9nKCdqUXVlcnkgTG9hZGluZyEnKTsKICAgIH0KfSBjYXRjaCAoZXJyb3IpIHsKICAgIHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpOwogICAgc2NyaXB0LnNldEF0dHJpYnV0ZSgic3JjIiwiaHR0cHM6Ly9hcHBzLmJkaW1nLmNvbS9saWJzL2pxdWVyeS8yLjEuNC9qcXVlcnkubWluLmpzIik7CiAgICBkb2N1bWVudC5jaGlsZHJlblswXS5hcHBlbmRDaGlsZChzY3JpcHQpOwogICAgY29uc29sZS5sb2coJ2pRdWVyeSBMb2FkaW5nIScpOwp9CmFzeW5jIGZ1bmN0aW9uIHNlbmQobWV0aG9kLHVybCxkYXRhPSIiLGpzb25Td2l0Y2g9dHJ1ZSkgewogICAgbGV0IGFqYXhDb25maWcgPSB7CiAgICAgICAgInR5cGUiOm1ldGhvZCwKICAgICAgICAidXJsIjp1cmwsCiAgICAgICAgImRhdGEiOmRhdGEsCiAgICAgICAgInhockZpZWxkcyI6ewogICAgICAgICAgICAid2l0aENyZWRlbnRpYWxzIjp0cnVlCiAgICAgICAgfQogICAgfQogICAgaWYgKGpzb25Td2l0Y2gpIHsKICAgICAgICBhamF4Q29uZmlnWyJkYXRhIl0gPSBKU09OLnN0cmluZ2lmeShkYXRhKTsKICAgICAgICBhamF4Q29uZmlnWyJkYXRhVHlwZSJdID0gImpzb24iOwogICAgICAgIGFqYXhDb25maWdbImNvbnRlbnRUeXBlIl0gPSAiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04IjsKICAgICAgICBhamF4Q29uZmlnWyJoZWFkZXJzIl0gPSB7CiAgICAgICAgICAgICJDb250ZW50LVR5cGUiOmBhcHBsaWNhdGlvbi9qc29uO2NoYXJzZXQ9VVRGLThgCiAgICAgICAgfTsKICAgIH0KICAgIGlmKGRhdGE9PSIiKXsKICAgICAgICBhamF4Q29uZmlnWyJkYXRhIl0gPSBudWxsOwogICAgfQogICAgbGV0IHJldHZhbCA9IGF3YWl0ICQuYWpheChhamF4Q29uZmlnKTsKICAgIHJldHVybiByZXR2YWw7Cn0KCmZ1bmN0aW9uIGZ1Y2tEb3dubG9hZChmaWQpIHsKICAgIGxldCBkYXRhID0gewogICAgICAgICJmaWRzIjpbXQogICAgfQogICAgaWYgKHR5cGVvZihmaWQpID09ICJvYmplY3QiKSB7CiAgICAgICAgZGF0YS5maWRzID0gZmlkOwogICAgfWVsc2V7CiAgICAgICAgZGF0YS5maWRzLnB1c2goZmlkKTsKICAgIH0KICAgIHNlbmQoIlBPU1QiLCJodHRwczovL2RyaXZlLnF1YXJrLmNuLzEvY2xvdWRkcml2ZS9maWxlL2Rvd25sb2FkP3ByPXVjcHJvJmZyPXBjIixkYXRhKS50aGVuKChkYXRhKSA9PiB7CiAgICAgICAgaWYoZGF0YS5jb2RlID09IDApewogICAgICAgICAgICBmb3IgKGxldCBkb3dubG9hZF9kYXRhIG9mIGRhdGEuZGF0YSkgewogICAgICAgICAgICAgICAgd2luZG93Lm9wZW4oZG93bmxvYWRfZGF0YVsiZG93bmxvYWRfdXJsIl0pOwogICAgICAgICAgICB9CiAgICAgICAgfWVsc2V7CiAgICAgICAgICAgIGFsZXJ0KCJGdWNrRG93bmxvYWQgRmFpbCwgZXJyb3I6ICIgKyBkYXRhWyJtZXNzYWdlIl0pOwogICAgICAgIH0KICAgIH0pCn0KCmZ1bmN0aW9uIGV4cG9ydERpcih0YXNrX2RhdGEpIHsKICAgIHNlbmQoIkdFVCIsImh0dHBzOi8vZHJpdmUucXVhcmsuY24vMS9jbG91ZGRyaXZlL2Rvd25sb2FkL2xpc3QvZXhwb3J0P3ByPXVjcHJvJmZyPXBjIix0YXNrX2RhdGEsZmFsc2UpLnRoZW4oKGRhdGExKSA9PiB7CiAgICAgICAgaWYgKGRhdGExID09ICIiKSB7CiAgICAgICAgICAgIHNldFRpbWVvdXQoZXhwb3J0RGlyKHRhc2tfZGF0YSksNTAwKTsKICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgbGV0IGZpZHN0ciA9IGRhdGExLm1hdGNoKC9cOihbYS16MC05XSspOy9nKTsKICAgICAgICAgICAgZm9yIChsZXQgZmlkcyBvZiBmaWRzdHIpIHsKICAgICAgICAgICAgICAgIGZ1Y2tEb3dubG9hZChmaWRzLnJlcGxhY2UoIjoiLCIiKS5yZXBsYWNlKCI7IiwiIikuc3BsaXQoIiwiKSk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICB9KTsKfQoKZnVuY3Rpb24gZnVja0Rvd25sb2FkRGlyKGZpZCkgewogICAgbGV0IGRhdGEgPSB7CiAgICAgICAgImN1cnJlbnRfZGlyX2ZpZCI6ZmlkCiAgICB9OwogICAgc2VuZCgiUE9TVCIsImh0dHBzOi8vZHJpdmUucXVhcmsuY24vMS9jbG91ZGRyaXZlL2Rvd25sb2FkL2xpc3Q/cHI9dWNwcm8mZnI9cGMiLGRhdGEpLnRoZW4oKGRhdGEpID0+IHsKICAgICAgICBpZihkYXRhLmNvZGUgPT0gMCl7CiAgICAgICAgICAgIGxldCB0YXNrX2RhdGEgPSB7CiAgICAgICAgICAgICAgICAidGFza19pZCI6ZGF0YS5kYXRhWyd0YXNrX2lkJ10KICAgICAgICAgICAgfTsKICAgICAgICAgICAgZXhwb3J0RGlyKHRhc2tfZGF0YSk7CiAgICAgICAgfWVsc2V7CiAgICAgICAgICAgIGFsZXJ0KCJGdWNrRG93bmxvYWQgRmFpbCwgZXJyb3I6ICIgKyBkYXRhWyJtZXNzYWdlIl0pOwogICAgICAgIH0KICAgIH0pOwp9CgpmdW5jdGlvbiBmdWNrRG93bmxvYWRzKCkgewogICAgZmlsZVRyID0gJCgidHJbZGF0YS1yb3cta2V5XSIpOwogICAgZm9yIChsZXQgaSA9IDAgOyBpIDwgZmlsZVRyLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgZmlsZSA9IGZpbGVUcltpXTsKICAgICAgICBsZXQgZmlkID0gZmlsZS5nZXRBdHRyaWJ1dGUoImRhdGEtcm93LWtleSIpOwogICAgICAgIGxldCBzaXplVGQgPSBmaWxlLmdldEVsZW1lbnRzQnlUYWdOYW1lKCJ0ZCIpWzJdOwogICAgICAgIGlmKHNpemVUZC5nZXRBdHRyaWJ1dGUoImlzZnVja2VkIikgIT0gInllcyIpewogICAgICAgICAgICBpZiAoc2l6ZVRkLmlubmVyVGV4dCA9PSAiLSIpIHsKICAgICAgICAgICAgICAgIHNpemVUZC5pbm5lckhUTUwgPSBzaXplVGQuaW5uZXJUZXh0ICsgIjxidXR0b24gb25jbGljaz0nZnVja0Rvd25sb2FkRGlyKFwiIiArIGZpZCArICJcIiknPi0+IERvd25sb2FkIDwtPC9idXR0b24+IjsKICAgICAgICAgICAgfWVsc2V7CiAgICAgICAgICAgICAgICBzaXplVGQuaW5uZXJIVE1MID0gc2l6ZVRkLmlubmVyVGV4dCArICI8YnV0dG9uIG9uY2xpY2s9J2Z1Y2tEb3dubG9hZChcIiIgKyBmaWQgKyAiXCIpJz4tPiBEb3dubG9hZCA8LTwvYnV0dG9uPiI7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgc2l6ZVRkLnNldEF0dHJpYnV0ZSgiaXNmdWNrZWQiLCJ5ZXMiKTsKICAgICAgICB9CiAgICB9Cn0KCmZ1bmN0aW9uIHN0YXJ0RnVjaygpIHsKICAgIHRyeSB7CiAgICAgICAgaWYgKHR5cGVvZigkLmFqYXgpID09ICdmdW5jdGlvbicpewogICAgICAgICAgICBmdWNrRG93bmxvYWRzKCk7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKCJGdWNrIERvd25sb2FkcyBTdWNjZXNzISIpCiAgICAgICAgfWVsc2V7CiAgICAgICAgICAgIHNldFRpbWVvdXQoc3RhcnRGdWNrLDEwMCk7CiAgICAgICAgfQogICAgfSBjYXRjaCAoZXJyb3IpIHsKICAgICAgICBzZXRUaW1lb3V0KHN0YXJ0RnVjaywxMDApOwogICAgfQogICAgCn0KCnNldFRpbWVvdXQoc3RhcnRGdWNrLDEwMCk7'));