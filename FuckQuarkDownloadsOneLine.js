javascript:eval(window.atob('dHJ5IHsKICAgIGlmICh0eXBlb2YoJC5hamF4KSA9PSAnZnVuY3Rpb24nKSB7CiAgICAgICAgY29uc29sZS5sb2coJ2pRdWVyeSBMb2FkZWQhJyk7CiAgICB9ZWxzZXsKICAgICAgICBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTsKICAgICAgICBzY3JpcHQuc2V0QXR0cmlidXRlKCJzcmMiLCJodHRwczovL2FwcHMuYmRpbWcuY29tL2xpYnMvanF1ZXJ5LzIuMS40L2pxdWVyeS5taW4uanMiKTsKICAgICAgICBkb2N1bWVudC5jaGlsZHJlblswXS5hcHBlbmRDaGlsZChzY3JpcHQpOwogICAgICAgIGNvbnNvbGUubG9nKCdqUXVlcnkgTG9hZGluZyEnKTsKICAgIH0KfSBjYXRjaCAoZXJyb3IpIHsKICAgIHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpOwogICAgc2NyaXB0LnNldEF0dHJpYnV0ZSgic3JjIiwiaHR0cHM6Ly9hcHBzLmJkaW1nLmNvbS9saWJzL2pxdWVyeS8yLjEuNC9qcXVlcnkubWluLmpzIik7CiAgICBkb2N1bWVudC5jaGlsZHJlblswXS5hcHBlbmRDaGlsZChzY3JpcHQpOwogICAgY29uc29sZS5sb2coJ2pRdWVyeSBMb2FkaW5nIScpOwp9CmFzeW5jIGZ1bmN0aW9uIHNlbmQobWV0aG9kLHVybCxkYXRhPSIiKSB7CiAgICBsZXQgYWpheENvbmZpZyA9IHsKICAgICAgICAidHlwZSI6bWV0aG9kLAogICAgICAgICJ1cmwiOnVybCwKICAgICAgICAiZGF0YSI6SlNPTi5zdHJpbmdpZnkoZGF0YSksCiAgICAgICAgImRhdGFUeXBlIjoianNvbiIsCiAgICAgICAgImNvbnRlbnRUeXBlIjoiYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04IiwKICAgICAgICAiaGVhZGVycyI6ewogICAgICAgICAgICAiQ29udGVudC1UeXBlIjpgYXBwbGljYXRpb24vanNvbjtjaGFyc2V0PVVURi04YAogICAgICAgIH0sCiAgICAgICAgInhockZpZWxkcyI6ewogICAgICAgICAgICAid2l0aENyZWRlbnRpYWxzIjp0cnVlCiAgICAgICAgfQogICAgfQogICAgaWYoZGF0YT09IiIpewogICAgICAgIGFqYXhDb25maWdbImRhdGEiXSA9IG51bGwKICAgIH0KICAgIGxldCByZXR2YWwgPSBhd2FpdCAkLmFqYXgoYWpheENvbmZpZyk7CiAgICByZXR1cm4gcmV0dmFsOwp9CgpmdW5jdGlvbiBmdWNrRG93bmxvYWQoZmlkKSB7CiAgICBsZXQgZGF0YSA9IHsKICAgICAgICAiZmlkcyI6W10KICAgIH0KICAgIGRhdGEuZmlkcy5wdXNoKGZpZCk7CiAgICBzZW5kKCJQT1NUIiwiaHR0cHM6Ly9kcml2ZS5xdWFyay5jbi8xL2Nsb3VkZHJpdmUvZmlsZS9kb3dubG9hZD9wcj11Y3BybyZmcj1wYyIsZGF0YSkudGhlbigoZGF0YSkgPT4gewogICAgICAgIGlmKGRhdGEuY29kZSA9PSAwKXsKICAgICAgICAgICAgd2luZG93Lm9wZW4oZGF0YS5kYXRhWzBdWyJkb3dubG9hZF91cmwiXSk7CiAgICAgICAgfWVsc2V7CiAgICAgICAgICAgIGFsZXJ0KCJGdWNrRG93bmxvYWQgRmFpbCwgZXJyb3I6ICIgKyBkYXRhWyJtZXNzYWdlIl0pOwogICAgICAgIH0KICAgIH0pCn0KCmZ1bmN0aW9uIGZ1Y2tEb3dubG9hZHMoKSB7CiAgICBmaWxlVHIgPSAkKCJ0cltkYXRhLXJvdy1rZXldIik7CiAgICBmb3IgKGxldCBpID0gMCA7IGkgPCBmaWxlVHIubGVuZ3RoOyBpKyspIHsKICAgICAgICBmaWxlID0gZmlsZVRyW2ldOwogICAgICAgIGxldCBmaWQgPSBmaWxlLmdldEF0dHJpYnV0ZSgiZGF0YS1yb3cta2V5Iik7CiAgICAgICAgbGV0IHNpemVUZCA9IGZpbGUuZ2V0RWxlbWVudHNCeVRhZ05hbWUoInRkIilbMl07CiAgICAgICAgaWYoc2l6ZVRkLmdldEF0dHJpYnV0ZSgiaXNmdWNrZWQiKSAhPSAieWVzIil7CiAgICAgICAgICAgIHNpemVUZC5pbm5lckhUTUwgPSBzaXplVGQuaW5uZXJUZXh0ICsgIjxidXR0b24gb25jbGljaz0nZnVja0Rvd25sb2FkKFwiIiArIGZpZCArICJcIiknPi0+IERvd25sb2FkIDwtPC9idXR0b24+IgogICAgICAgICAgICBzaXplVGQuc2V0QXR0cmlidXRlKCJpc2Z1Y2tlZCIsInllcyIpOwogICAgICAgIH0KICAgIH0KfQoKZnVuY3Rpb24gc3RhcnRGdWNrKCkgewogICAgdHJ5IHsKICAgICAgICBpZiAodHlwZW9mKCQuYWpheCkgPT0gJ2Z1bmN0aW9uJyl7CiAgICAgICAgICAgIGZ1Y2tEb3dubG9hZHMoKTsKICAgICAgICAgICAgY29uc29sZS5sb2coIkZ1Y2sgRG93bmxvYWRzIFN1Y2Nlc3MhIikKICAgICAgICB9ZWxzZXsKICAgICAgICAgICAgc2V0VGltZW91dChzdGFydEZ1Y2ssMTAwKTsKICAgICAgICB9CiAgICB9IGNhdGNoIChlcnJvcikgewogICAgICAgIHNldFRpbWVvdXQoc3RhcnRGdWNrLDEwMCk7CiAgICB9CiAgICAKfQoKc2V0VGltZW91dChzdGFydEZ1Y2ssMTAwKTs='));